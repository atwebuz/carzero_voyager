(self.webpackChunkelectrocars=self.webpackChunkelectrocars||[]).push([[697],{4270:function(t,e,i){"use strict";var r=i(9755),o=i.n(r);function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,function(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}(t,e,"get"))}var s=new WeakMap,n=new WeakMap,l=new WeakMap,c=new WeakMap;e.Z=class{constructor(t,e){s.set(this,{writable:!0,value:()=>this.options.onShowMore()}),n.set(this,{writable:!0,value:()=>{window.scrollTo({top:0,behavior:"smooth"})}}),l.set(this,{writable:!0,value:t=>{o()(t.target).get(0).play()}}),c.set(this,{writable:!0,value:t=>{o()(t.target).get(0).pause()}}),this.options=e,this.$grid=o()(t),this.$wrapperGrid=o()(t).find(".news-grid__wrapper"),this.$buttonMore=o()(t).find("#button-more"),this.$buttonScrollUp=o()(t).find("#button-scroll-up"),this.$allVideos=o()(t).find(".small-article-card__video"),this.$buttonMore.on("click",a(this,s)),this.$buttonScrollUp.on("click",a(this,n)),this.$wrapperGrid.on("mouseenter",".small-article-card__video",a(this,l)),this.$wrapperGrid.on("mouseleave",".small-article-card__video",a(this,c))}}},3538:function(t,e,i){"use strict";i.d(e,{P:function(){return h}});var r=i(9755),o=i.n(r);i(8944);function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,function(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}(t,e,"get"))}var n=new WeakMap,l=new WeakMap,c=new WeakMap;class h{constructor(t,e){n.set(this,{writable:!0,value:()=>{this.$el.addClass("select--open")}}),l.set(this,{writable:!0,value:t=>{var e=o()(t.target),i=this.$el.find(".select__trigger-text"),r=this.$el.data("select-name"),a=e.data("value"),s=e.text();this.$option.removeClass("select__option--selected"),e.addClass("select__option--selected"),i.text(s),i.addClass("select__trigger-text--selected"),this.options.onChange({name:r,value:a,text:s,target:t.target}),this.close()}}),c.set(this,{writable:!0,value:t=>{o()(t.target).closest(this.$el).length||this.close()}}),a(this,"close",(()=>{this.$el.removeClass("select--open")})),a(this,"reset",(()=>{var t=this.$el.find(".select__trigger-text"),e=t.data("placeholder");t.text(e),t.removeClass("select__trigger-text--selected"),this.$option.removeClass("select__option--selected")})),this.options=e,this.$el=o()(t),this.$trigger=this.$el.find(".select__trigger"),this.$option=this.$el.find(".select__option"),this.$trigger.on("click",s(this,n)),this.$option.on("click",s(this,l)),o()(window).on("click",s(this,c)),o()(".select__options").overlayScrollbars({className:"select__options"})}setValue(t){var e=this.$el.find('[data-value="'.concat(t,'"]'));e.length&&s(this,l).call(this,{target:e.get(0)})}}},6231:function(t,e,i){"use strict";i.d(e,{p:function(){return l}});var r=i(5716),o=i(9755),a=i.n(o),s=i(8509);function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class l{constructor(){var t=this;n(this,"show",(function(){var{title:e,subtitle:i,buttonText:o="\u041e\u043a"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.p8.timeline();t.$contentWrapper.empty(),n.to(t.$serviceModalRoot,{display:"flex",duration:0}),n.to(".service-modal-root__overlay",{opacity:1,duration:.3}),n.to(".service-modal-root__content-wrapper",{opacity:1,translateY:0,duration:.5}),e&&a()("<div/>",{class:"service-modal-root__title"}).text(e).appendTo(t.$contentWrapper),i&&a()("<div/>",{class:"service-modal-root__subtitle"}).text(i).appendTo(t.$contentWrapper),a()("<button/>",{class:"button button--variant-outlined-gray service-modal-root__close-button"}).text(o).appendTo(t.$contentWrapper);var l=document.documentElement;(0,s.Qp)(l)})),n(this,"hide",(()=>{var t=r.p8.timeline();t.to(".service-modal-root__content-wrapper",{opacity:0,translateY:50,duration:.3}),t.to(".service-modal-root__overlay",{opacity:0,duration:.5}),t.to(this.$serviceModalRoot,{display:"none",duration:0,onComplete:()=>{this.$contentWrapper.empty(),(0,s.tP)()}})})),this.$serviceModalRoot=a()("#service-modal-root"),this.$contentWrapper=this.$serviceModalRoot.find(".service-modal-root__content-wrapper"),this.$overlay=this.$serviceModalRoot.find(".service-modal-root__overlay"),this.$title=this.$serviceModalRoot.find(".service-modal-root__title"),this.$subtitle=this.$serviceModalRoot.find(".service-modal-root__subtitle"),this.$overlay.on("click",this.hide),this.$contentWrapper.on("click",".service-modal-root__close-button",this.hide)}}},5292:function(t,e,i){"use strict";i.d(e,{b:function(){return r}});var r=()=>window.getComputedStyle(document.body,":before").content.replace(/"/g,"")},2740:function(t,e,i){"use strict";var r=i(9755),o=i.n(r),a=i(5317),s=i(5292),n=i(8509),l=i(3538);function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,function(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}(t,e,"get"))}var d=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,w=new WeakMap,v=new WeakMap,m=new WeakMap,g=new WeakMap;var $=class{constructor(t,e){d.set(this,{writable:!0,value:t=>{o()(t.target).closest(this.$filterDropdown).length||this.close()}}),u.set(this,{writable:!0,value:t=>{var e=o()(t.target).closest(".filter-category"),i=o()(t.target).closest(".filter-category__item");if(i.length&&e.length){var r=e.data("filter-name"),a=i.data("filter-value");h(this,g).call(this,{name:r,value:a}),this.$filterCategoryItems.removeClass("filter-category__item--selected"),i.addClass("filter-category__item--selected")}}}),p.set(this,{writable:!0,value:t=>{var e=o()(t.target).closest(".filter-dropdown__trigger"),i=(0,s.b)();e.length&&this.$filterDropdown.addClass("filter-dropdown--open"),"sm"===i&&(0,n.Qp)(document.body)}}),f.set(this,{writable:!0,value:t=>{var e=o()(t.target).closest(".filter-dropdown__item"),i=o()(t.target).closest(".filter-dropdown__list"),r=i.data("filter-name"),a=e.data("filter-value"),s=e.data("text");i.data("incompatible-filters-names").split(", ").forEach((t=>{this.filterState[t]="",this.filterStateText[t]="",this[t].reset()})),this.filterStateText[r]=s,h(this,g).call(this,{name:r,value:a}),this.$filterDropdownItem.removeClass("filter-dropdown__item--selected"),e.addClass("filter-dropdown__item--selected"),this.$filterDropdown.removeClass("filter-dropdown--open"),(0,n.tP)()}}),w.set(this,{writable:!0,value:()=>{this.$rootEl.find(".select").each(((t,e)=>{var i=o()(e),r=i.data("filter-name");i.attr("data-select-name",r),this[r]=new l.P('[data-select-name="'.concat(r,'"]'),{onChange:h(this,m)})}))}}),v.set(this,{writable:!0,value:()=>{var t,e,i=(t=this.filterStateText,(e=Object.keys(t).filter((e=>Boolean(t[e]))).map((e=>t[e])).join(" "))?"\u0417\u0430 ".concat(e.toLocaleLowerCase()):"");if(i){var r=this.$filterDropdownState.find(".filter-state__text");this.$filterDropdownState.removeClass("filter-state--hidden"),r.text(i)}}}),m.set(this,{writable:!0,value:t=>{var{name:e,value:i,text:r}=t,o=this[e].$el.data("incompatible-filters-names").split(", ");this.filterStateText[e]=r,o.forEach((t=>{this.filterState[t]="",this.filterStateText[t]="",this.$filterDropdownItem.removeClass("filter-dropdown__item--selected")})),h(this,g).call(this,{name:e,value:i})}}),g.set(this,{writable:!0,value:t=>{var{name:e,value:i}=t;this.filterState[e]=i,this.options.onFilterChange(this.filterState),h(this,v).call(this)}}),c(this,"close",(()=>{this.$filterDropdown.removeClass("filter-dropdown--open"),(0,n.tP)()})),c(this,"resetFilter",(()=>{var t=this.$filterDropdownState.find(".filter-state__text"),e=[this.$filterDropdownList.data("filter-name")];this.filterStateText={},this.$filterDropdownList.find("[data-filter-name]").each(((t,i)=>{var r=o()(i).data("filter-name");this[r].reset(),e=[...e,r]})),e.forEach((t=>{this.filterState[t]=""})),this.options.onFilterChange(this.filterState),this.$filterDropdownState.addClass("filter-state--hidden"),this.$filterDropdownItem.removeClass("filter-dropdown__item--selected"),t.text("")})),this.options=e,this.$rootEl=o()(t),this.$filterCategory=this.$rootEl.find(".filter-category"),this.$filterCategoryItems=this.$rootEl.find(".filter-category__item"),this.$filterDropdown=this.$rootEl.find(".filter-dropdown"),this.$filterDropdownList=this.$rootEl.find(".filter-dropdown__list"),this.$filterDropdownItem=this.$rootEl.find(".filter-dropdown__item"),this.$filterDropdownButtonClose=this.$rootEl.find(".filter-dropdown__close"),this.$filterDropdownState=this.$rootEl.find(".filter-state"),this.$filterDropdownStateButtonClose=this.$rootEl.find(".filter-state__icon"),this.$filterCategoryCounter=this.$rootEl.find(".filter-category__counter"),o()(window).on("click",h(this,d)),this.$filterCategory.on("click",".filter-category__item",h(this,u)),this.$filterDropdown.on("click",".filter-dropdown__trigger",h(this,p)),this.$filterDropdownList.on("click",".filter-dropdown__item",h(this,f)),this.$filterDropdownButtonClose.on("click",this.close),this.$filterDropdownStateButtonClose.on("click",this.resetFilter),h(this,w).call(this),this.filterState=(t=>{var e=o()(t),i={};return e.find("[data-filter-name]").each(((t,e)=>{var r=o()(e).data("filter-name");i[r]=""})),i})(t),this.filterStateText={}}setCounter(t){this.$filterCategoryCounter.text(t)}},b=i(4270),_=i(5716);function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var C=new class{constructor(){y(this,"open",(()=>{_.p8.timeline().to(this.$rootEl,{translateY:"0",duration:.5}),(0,n.Qp)(document.documentElement)})),y(this,"close",(()=>{_.p8.timeline().to(this.$rootEl,{translateY:"-100%",duration:.5}),(0,n.tP)()})),this.$rootEl=o()("#charging-map"),this.$closeButton=this.$rootEl.find(".charging-map__close"),this.$closeButton.on("click",this.close)}},M=i(6231);function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){W(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function W(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function x(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,function(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}(t,e,"get"))}var D=new WeakMap,E=new WeakMap,O=new WeakMap,P=new WeakMap,T=new WeakMap,j=new WeakMap,G=new WeakMap,N=new WeakMap,B=new WeakMap,V=new WeakMap,F=new WeakMap;new class{constructor(){var t=this;D.set(this,{writable:!0,value:()=>{C.open()}}),E.set(this,{writable:!0,value:t=>{o()(t.target).get(0).play()}}),O.set(this,{writable:!0,value:t=>{o()(t.target).get(0).pause()}}),P.set(this,{writable:!0,value:()=>{x(this,T).call(this)}}),T.set(this,{writable:!0,value:()=>{var t=(0,s.b)(),e=this.newsGrid.$wrapperGrid;if(this.recentNewsCount=this.$recentNews.children().length,"md"===t&&3===this.recentNewsCount){var i=this.$recentNews.children().last();e.prepend(i)}}}),j.set(this,{writable:!0,value:t=>{var e=(0,s.b)(),i=this.newsGrid.$wrapperGrid;"md"===e&&3===this.recentNewsCount&&i.children().first()[t]()}}),G.set(this,{writable:!0,value:t=>{var e=!!Object.values(t).filter((t=>Boolean(t))).length;this.filterState=t,x(this,F).call(this),e?x(this,N).call(this):x(this,B).call(this)}}),N.set(this,{writable:!0,value:()=>{var t=new a.Vq;x(this,j).call(this,"hide");var e=getComputedStyle(this.$recentNews.get(0),null).getPropertyValue("margin-bottom"),i=parseInt(e,10);this.$recentNews.data("marginTopValueBeforeAnimation")||this.$recentNews.data("marginTopValueBeforeAnimation",i),t.to(this.$recentNews,{opacity:0,duration:.5}).to(this.$recentNews,{marginBottom:0,duration:.5},"-=0.5").to(this.$recentNews,{height:0,duration:.5},"-=0.5")}}),B.set(this,{writable:!0,value:()=>{var t=new a.Vq;x(this,j).call(this,"show");var e=this.$recentNews.data("marginTopValueBeforeAnimation");t.to(this.$recentNews,{opacity:1,duration:.5}).to(this.$recentNews,{marginBottom:e,duration:.5},"-=0.5").to(this.$recentNews,{height:"auto",duration:.5},"-=0.5")}}),V.set(this,{writable:!0,value:()=>{x(this,F).call(this,{mode:"addMore"})}}),F.set(this,{writable:!0,value:function(){var{mode:e="default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.newsGrid.$grid.data("fetch-articles-url"),r=t.currentPage;"addMore"===e&&(r=t.currentPage+1,t.newsGrid.$buttonMore.addClass("button--loading"),t.newsGrid.$buttonMore.prop("disabled",!0)),o().ajax({type:"GET",url:"".concat("").concat(i),data:S({page:r},t.filterState)}).done((i=>{"addMore"===e?(t.currentPage+=1,t.newsGrid.$wrapperGrid.append(o()(i.content))):(t.currentPage=1,t.newsGrid.$wrapperGrid.html(i.content)),i.last_page?t.newsGrid.$buttonMore.hide():t.newsGrid.$buttonMore.show(),t.newsFilter.setCounter(i.countLabel)})).fail((()=>{t.serviceModal.show({title:"\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u0438",buttonText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})})).always((()=>{t.newsGrid.$buttonMore.removeClass("button--loading"),t.newsGrid.$buttonMore.prop("disabled",!1)}))}}),this.$recentNews=o()("#recent-news"),this.newsGrid=new b.Z("#news-grid",{onShowMore:x(this,V)}),this.newsFilter=new $("#news-filter",{onFilterChange:x(this,G)}),this.serviceModal=new M.p,o()(window).on("load",x(this,P)),o()(".map-button").on("click",x(this,D)),this.$recentNews.on("mouseenter",".small-article-card__video",x(this,E)),this.$recentNews.on("mouseleave",".small-article-card__video",x(this,O)),this.recentNewsCount=1,this.currentPage=1,this.filterState={}}}}},function(t){"use strict";t.O(0,[216],(function(){return e=2740,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=news.13506ca8.bundle.js.map